# 三维战术建议系统：个人教练 + 战术分析师 + 团队协调

## 🎯 **完整的战术体系**

```
┌────────────────────────────────────────────────────────┐
│           三维智能建议系统                              │
├────────────────────────────────────────────────────────┤
│                                                        │
│  1️⃣ 对自己（我方玩家本人）                            │
│     改进建议："我该怎么变强"                           │
│     场景：Dashboard 个人战绩                           │
│                                                        │
│  2️⃣ 对队友（我方其他4人）                             │
│     协作建议："我该怎么配合队友" ⭐ NEW                │
│     场景：Match Analysis 队友分析                      │
│                                                        │
│  3️⃣ 对敌人（敌方5人）                                 │
│     针对建议："如何针对对手"                           │
│     场景：Match Analysis 对手分析                      │
│                                                        │
└────────────────────────────────────────────────────────┘
```

---

## 💡 **核心理念：团队协作建议**

### **关键问题**

```
❓ 我方哪路强？哪路弱？
❓ 应该帮谁？保护谁？
❓ 如何最大化我方优势？
❓ 如何弥补我方劣势？
❓ 打野应该照顾哪路？
❓ 中单应该游走帮哪路？
```

### **战术核心**

```
强势路：扩大优势 → 辐射全图 → 赢得比赛
弱势路：保护发育 → 避免崩盘 → 等强势路带飞
```

---

## 📊 **团队实力分析**

### **我方5人实力评估**

```rust
/// 队友实力等级
#[derive(Debug, Clone, Serialize, Deserialize)]
pub enum TeammatePowerLevel {
    VeryStrong,   // 非常强（胜率>65%，KDA>4.0）
    Strong,       // 强（胜率>58%，KDA>3.0）
    Average,      // 一般（胜率50-58%）
    Weak,         // 弱（胜率<50%，KDA<2.5）
    VeryWeak,     // 非常弱（胜率<45%，KDA<2.0）
}

/// 队友分析结果
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct TeammateAnalysis {
    pub summoner_name: String,
    pub role: String,
    pub power_level: TeammatePowerLevel,
    pub win_rate: f64,
    pub avg_kda: f64,

    // 关键特征
    pub strengths: Vec<String>,    // 优势："对线压制力强"
    pub weaknesses: Vec<String>,   // 劣势："前期容易死"

    // 可靠度
    pub reliability: f64,          // 0.0-1.0，稳定性
}

/// 团队战术分析
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct TeamTacticalAnalysis {
    pub teammates: Vec<TeammateAnalysis>,
    pub enemies: Vec<TeammateAnalysis>,

    // 实力对比
    pub strongest_lane: String,    // 我方最强路："上路"
    pub weakest_lane: String,      // 我方最弱路："ADC"
    pub enemy_strongest: String,   // 敌方最强路
    pub enemy_weakest: String,     // 敌方最弱路

    // 战术建议
    pub tactical_advice: Vec<TacticalAdvice>,
}
```

---

## 🎮 **实际战术建议示例**

### **场景1：我方上单很强，ADC较弱**

```
┌──────────────────────────────────────────────────┐
│ 🎯 本局战术建议                                  │
├──────────────────────────────────────────────────┤
│ 我方实力分析：                                   │
│ ✅ 上单：非常强（胜率68%，KDA 4.5）              │
│    - 对线压制力强（前10分钟领先15刀）            │
│    - 团战定位好（参团率75%）                     │
│                                                  │
│ ⚠️ ADC：较弱（胜率48%，KDA 2.3）                │
│    - 对线期容易被压制（落后18刀）                │
│    - 前期容易死（60%对局前15分钟死2+次）         │
├──────────────────────────────────────────────────┤
│ 💡 战术建议：                                    │
│                                                  │
│ 【给打野】：                                     │
│ 🎯 优先级：主打上路！                            │
│ 1. 前期重点照顾上路，帮上单建立优势              │
│ 2. 3-6级抓上路2-3次，让上单滚雪球               │
│ 3. 下路适当保护，但不要浪费太多时间              │
│ 4. 配合上单拿峡谷先锋，推上塔                    │
│ → 目标：让上单成为队伍carry点                    │
│                                                  │
│ 【给中单】：                                     │
│ 🎯 游走优先级：多帮上路！                        │
│ 1. 6级后优先游走上路，配合打野越塔               │
│ 2. 下路尽量用信号提醒，不要过度游走              │
│ 3. 后期团战注意保护ADC                           │
│ → 目标：扩大上路优势，保护下路不崩                │
│                                                  │
│ 【给辅助】：                                     │
│ 🛡️ 重点保护ADC！                                │
│ 1. 对线期多做视野，避免被gank                    │
│ 2. 帮ADC控线，让他安全补刀                       │
│ 3. 不要随意开团，等上单优势起来                  │
│ 4. 团战优先保护ADC输出                           │
│ → 目标：让ADC稳住发育，不要崩                    │
│                                                  │
│ 【给ADC】：                                      │
│ 🛡️ 前期稳住，等上单带飞！                       │
│ 1. 对线期求稳，不要激进换血                      │
│ 2. 主动要求辅助做视野                            │
│ 3. 兵线推进时立即后撤，避免被gank                │
│ 4. 发育到2件套，等上单创造输出空间               │
│ → 目标：不崩盘，稳定发育                         │
│                                                  │
│ 【给上单】：                                     │
│ 💪 你是本局carry点！                             │
│ 1. 前期主动换血，建立压制                        │
│ 2. 配合打野击杀对方上单                          │
│ 3. 拿到优势后带节奏，参团率要高                  │
│ 4. 注意TP支援，扩大优势到其他路                  │
│ → 目标：建立优势，带动全队                       │
└──────────────────────────────────────────────────┘
```

---

### **场景2：我方整体弱于敌方，但中单很强**

```
┌──────────────────────────────────────────────────┐
│ 🎯 本局战术建议                                  │
├──────────────────────────────────────────────────┤
│ 实力对比：                                       │
│ 敌方：上路强、ADC强、打野强                      │
│ 我方：中单强（胜率66%，KDA 5.2）                 │
│       其他路均势或略弱                           │
├──────────────────────────────────────────────────┤
│ 💡 战术建议：                                    │
│                                                  │
│ 【核心战术】：围绕中单打！                       │
│                                                  │
│ 【给中单】：                                     │
│ 💪 你是本局唯一的希望！                          │
│ 1. 对线期压制对方中单，建立优势                  │
│ 2. 6级后频繁游走，帮上下路缓解压力               │
│ 3. 团战要carry，承担主要输出                     │
│ 4. 注意不要暴毙，你死了游戏就输了                │
│ → 目标：以一己之力改变战局                       │
│                                                  │
│ 【给打野】：                                     │
│ 🎯 配合中单，节奏带起来！                        │
│ 1. 前期常驻中路，反蹲保护中单                    │
│ 2. 配合中单抓边路，让中单拿到助攻经济            │
│ 3. 不要单干，跟着中单走                          │
│ → 目标：帮中单滚雪球                             │
│                                                  │
│ 【给上/下路】：                                  │
│ 🛡️ 前期求稳，等中单游走！                       │
│ 1. 对线不要激进，避免被单杀                      │
│ 2. 猥琐发育，不要给对面机会                      │
│ 3. 中单游走时配合击杀                            │
│ 4. 团战保护中单输出                              │
│ → 目标：不送，等中单carry                        │
│                                                  │
│ 【团队整体】：                                   │
│ ⏰ 打运营，避免正面团！                          │
│ 1. 前中期避免5v5团战（会输）                     │
│ 2. 利用中单优势打分带和抓单                      │
│ 3. 拖到后期，依靠中单carry                       │
│ 4. 注意保护中单，他是唯一希望                    │
│ → 目标：避免正面，打运营，拖后期                 │
└──────────────────────────────────────────────────┘
```

---

### **场景3：敌方上路很强，我方上路较弱**

```
┌──────────────────────────────────────────────────┐
│ 🎯 本局战术建议                                  │
├──────────────────────────────────────────────────┤
│ 实力对比：                                       │
│ 敌方上单：非常强（胜率70%，对线压制力强）        │
│ 我方上单：较弱（胜率49%，容易被压制）            │
├──────────────────────────────────────────────────┤
│ 💡 战术建议：                                    │
│                                                  │
│ 【给上单】：                                     │
│ 🛡️ 求稳！不要给机会！                           │
│ 1. 对线极度保守，塔下补刀                        │
│ 2. 宁愿漏刀，不要被击杀                          │
│ 3. 主动要求打野反蹲                              │
│ 4. 选择稳健型英雄（塞恩、奥恩、石头人）          │
│ 5. 出肉装，不要想着对拼                          │
│ → 目标：撑住，不要崩                             │
│                                                  │
│ 【给打野】：                                     │
│ 🛡️ 多去上路反蹲！                               │
│ 1. 前期常驻上半区，保护上单                      │
│ 2. 不要尝试gank（会被反杀）                      │
│ 3. 只在必要时反蹲，让上单吃线                    │
│ 4. 主要精力放在中下路找机会                      │
│ → 目标：让上路稳住，从其他路找突破                │
│                                                  │
│ 【给中单】：                                     │
│ 🎯 不要游走上路！                                │
│ 1. 不要游走上路（会被反杀）                      │
│ 2. 优先游走下路找机会                            │
│ 3. 后期团战注意对方上单位置                      │
│ → 目标：避开敌方强点，打其他路                   │
│                                                  │
│ 【团队整体】：                                   │
│ ⚠️ 避开上路，打下半区！                         │
│ 1. 前期不打峡谷先锋（会被抢）                    │
│ 2. 资源重心放下半区（小龙、下路塔）              │
│ 3. 团战远离对方上单，不要给他进场机会            │
│ 4. 利用人数优势打下半区                          │
│ → 目标：以多打少，避开对方上单                   │
└──────────────────────────────────────────────────┘
```

---

## 🔍 **实力评估算法**

### **综合评分系统**

```rust
/// 计算队友实力等级
fn calculate_power_level(stats: &PlayerMatchStats) -> TeammatePowerLevel {
    let mut score = 0.0;

    // 1. 胜率权重 40%
    if stats.win_rate >= 65.0 {
        score += 40.0;
    } else if stats.win_rate >= 58.0 {
        score += 30.0;
    } else if stats.win_rate >= 50.0 {
        score += 20.0;
    } else if stats.win_rate >= 45.0 {
        score += 10.0;
    }

    // 2. KDA权重 30%
    if stats.avg_kda >= 4.0 {
        score += 30.0;
    } else if stats.avg_kda >= 3.0 {
        score += 20.0;
    } else if stats.avg_kda >= 2.5 {
        score += 15.0;
    } else if stats.avg_kda >= 2.0 {
        score += 10.0;
    }

    // 3. 稳定性权重 20%
    let stability = calculate_stability(stats);
    score += stability * 20.0;

    // 4. 特征加成 10%
    let trait_bonus = calculate_trait_bonus(stats);
    score += trait_bonus * 10.0;

    // 分类
    if score >= 80.0 {
        TeammatePowerLevel::VeryStrong
    } else if score >= 65.0 {
        TeammatePowerLevel::Strong
    } else if score >= 50.0 {
        TeammatePowerLevel::Average
    } else if score >= 35.0 {
        TeammatePowerLevel::Weak
    } else {
        TeammatePowerLevel::VeryWeak
    }
}
```

---

## 📊 **战术决策树**

```
开始分析
    ↓
识别我方最强路（A）和最弱路（B）
识别敌方最强路（C）和最弱路（D）
    ↓
┌─────────────────────────────────────┐
│ 决策1：进攻方向                     │
├─────────────────────────────────────┤
│ IF 我方A路 > 敌方C路：              │
│    → 主打A路，扩大优势               │
│                                     │
│ IF 我方A路 < 敌方C路 但 A路 > D路： │
│    → 打敌方最弱路D，避开敌方C路      │
│                                     │
│ IF 我方整体弱：                     │
│    → 打运营，避免正面团              │
└─────────────────────────────────────┘
    ↓
┌─────────────────────────────────────┐
│ 决策2：资源分配                     │
├─────────────────────────────────────┤
│ IF 我方B路很弱：                    │
│    → 打野多反蹲，保护不崩            │
│                                     │
│ IF 我方A路很强：                    │
│    → 打野重点照顾，扩大优势          │
│                                     │
│ IF 我方均势：                       │
│    → 打野游走灵活，哪路机会打哪路    │
└─────────────────────────────────────┘
    ↓
生成针对性战术建议
```

---

## 🎨 **前端显示设计**

### **团队战术面板**

```vue
<!-- TeamTacticsPanel.vue -->
<template>
  <div class="team-tactics">
    <h2>🎯 团队战术建议</h2>

    <!-- 实力对比图 -->
    <div class="power-comparison">
      <div class="our-team">
        <h3>我方</h3>
        <RolePowerBar
          v-for="teammate in teammates"
          :key="teammate.summonerName"
          :player="teammate"
          :is-our-team="true"
        />
      </div>

      <div class="vs-divider">VS</div>

      <div class="enemy-team">
        <h3>敌方</h3>
        <RolePowerBar
          v-for="enemy in enemies"
          :key="enemy.summonerName"
          :player="enemy"
          :is-our-team="false"
        />
      </div>
    </div>

    <!-- 战术建议 -->
    <div class="tactical-advice">
      <div class="advice-header">
        <h3>💡 战术建议</h3>
        <p>基于双方实力分析</p>
      </div>

      <div
        v-for="(advice, index) in tacticalAdvice"
        :key="index"
        class="advice-card"
      >
        <div class="advice-target">
          【给{{ advice.targetRole }}】
        </div>
        <div class="advice-priority">
          {{ advice.priority }}
        </div>
        <ul class="advice-points">
          <li v-for="(point, i) in advice.suggestions" :key="i">
            {{ point }}
          </li>
        </ul>
      </div>
    </div>
  </div>
</template>
```

### **实力对比条**

```vue
<!-- RolePowerBar.vue -->
<template>
  <div class="power-bar" :class="powerLevelClass">
    <div class="role-info">
      <span class="role-icon">{{ getRoleIcon(player.role) }}</span>
      <span class="summoner-name">{{ player.summonerName }}</span>
    </div>

    <div class="power-meter">
      <div class="power-fill" :style="{ width: `${powerPercentage}%` }"></div>
    </div>

    <div class="power-label">
      {{ getPowerLabel(player.powerLevel) }}
      <span class="win-rate">{{ player.winRate.toFixed(0) }}%</span>
    </div>

    <!-- 关键特征 -->
    <div class="key-features">
      <span v-if="player.strengths.length > 0" class="strength">
        ✅ {{ player.strengths[0] }}
      </span>
      <span v-if="player.weaknesses.length > 0" class="weakness">
        ⚠️ {{ player.weaknesses[0] }}
      </span>
    </div>
  </div>
</template>

<script setup lang="ts">
const powerPercentage = computed(() => {
  const levels = {
    VeryStrong: 90,
    Strong: 70,
    Average: 50,
    Weak: 30,
    VeryWeak: 10
  }
  return levels[props.player.powerLevel] || 50
})
</script>
```

---

## 🎯 **战术建议类型**

### **1. 资源分配建议**

```
场景：我方上路强，ADC弱
建议：
- 打野：主打上路
- 峡谷先锋：给上路
- 团队资源：倾斜上路
```

### **2. 进攻方向建议**

```
场景：敌方下路弱
建议：
- 打野：多gank下路
- 中单：6级后游走下路
- 团队：前期主打下半区
```

### **3. 保护优先级建议**

```
场景：我方某路很弱
建议：
- 打野：多反蹲保护
- 队友：不要期待他carry
- 该路：求稳，不要崩
```

### **4. 团战战术建议**

```
场景：实力对比
建议：
- 强势：主动开团，5v5硬打
- 弱势：打运营，避免正面团
- 均势：抓单，打小规模团战
```

### **5. 英雄选择建议**

```
场景：我方某路弱，对上敌方强路
建议：
- 选择稳健型英雄（塞恩、奥恩）
- 不要选对拼英雄
- 选择发育后期的英雄
```

---

## 📊 **效果预览**

```
┌──────────────────────────────────────────────────┐
│ 🎯 团队战术分析                                  │
├──────────────────────────────────────────────────┤
│ 实力对比：                                       │
│                                                  │
│ 我方：                                           │
│ 上单 ████████░░ 80% 强        ✅ 对线压制        │
│ 打野 █████░░░░░ 50% 一般                        │
│ 中单 ██████░░░░ 60% 一般                        │
│ ADC  ██░░░░░░░░ 20% 弱        ⚠️ 容易被压制     │
│ 辅助 ████░░░░░░ 40% 弱                          │
│                                                  │
│ 敌方：                                           │
│ 上单 ████░░░░░░ 40% 弱                          │
│ 打野 ██████░░░░ 60% 一般                        │
│ 中单 █████░░░░░ 50% 一般                        │
│ ADC  ███████░░░ 70% 强        ✅ 对线强势        │
│ 辅助 ██████░░░░ 60% 一般                        │
├──────────────────────────────────────────────────┤
│ 💡 核心战术：主打上路，针对敌方上单！            │
│                                                  │
│ 【资源倾斜】上路（我方强 vs 敌方弱）            │
│ 【进攻方向】前期主打上半区                       │
│ 【保护重点】ADC需要保护（我方弱 vs 敌方强）     │
│ 【团战策略】利用上单优势，ADC稳定输出           │
└──────────────────────────────────────────────────┘
```

---

## 🚀 **实现路线**

### **阶段1：基础团队分析（3-4小时）**

```
✅ 实现团队实力评估算法
✅ 识别最强/最弱路
✅ 生成基础战术建议
✅ 前端实力对比显示
```

### **阶段2：智能战术建议（4-5小时）**

```
✅ 战术决策树
✅ 针对不同场景的建议
✅ 给每个位置的具体建议
✅ 前端战术面板
```

### **阶段3：整合三维系统（2-3小时）**

```
✅ 整合：改进 + 协作 + 针对
✅ 统一的建议生成接口
✅ 完整的前端展示
```

**总计：9-12小时**

---

## 🎉 **总结**

### **完整的三维系统**

```
┌─────────────────────────────────────────────┐
│ 个人教练 + 战术分析师 + 团队协调             │
├─────────────────────────────────────────────┤
│ 1️⃣ 对自己：改进建议（长期提升）            │
│    "我该怎么变强"                           │
│                                             │
│ 2️⃣ 对队友：协作建议（团队配合）⭐ NEW      │
│    "我该怎么配合队友"                       │
│    "哪路强弱，如何分配资源"                 │
│                                             │
│ 3️⃣ 对敌人：针对建议（赢得比赛）            │
│    "如何针对对手弱点"                       │
└─────────────────────────────────────────────┘
```

### **核心价值**

| 维度 | 价值 | 说明 |
|------|------|------|
| **全面性** | ⭐⭐⭐⭐⭐ | 覆盖个人、队友、对手 |
| **实用性** | ⭐⭐⭐⭐⭐ | 直接提供战术指导 |
| **团队性** | ⭐⭐⭐⭐⭐ | 体现5v5团队游戏本质 |
| **差异化** | ⭐⭐⭐⭐⭐ | 市面上独一无二的功能 |

---

**这个三维系统才是完整的"智能助手"！** 🎯

**不只是个人工具，更是团队教练！** 🚀

需要我帮你实现这个完整的三维战术系统吗？
