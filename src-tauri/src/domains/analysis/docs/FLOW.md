# å®Œæ•´æ•°æ®æµç¨‹è§£æ

## ğŸš€ **ä» API è°ƒç”¨åˆ°æœ€ç»ˆæ˜¾ç¤ºçš„å®Œæ•´æµç¨‹**

---

## ğŸ“Š **æµç¨‹æ€»è§ˆå›¾**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·æ“ä½œ / è‡ªåŠ¨è§¦å‘                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‰ç«¯ (Vue)                                                              â”‚
â”‚ - useSummonerAndMatchUpdater.ts                                        â”‚
â”‚ - invoke('get_match_history', { count, queue_id })                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tauri Command Layer                                                     â”‚
â”‚ - matches/commands.rs                                                   â”‚
â”‚ - #[tauri::command] get_match_history()                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service Layer                                                           â”‚
â”‚ - matches/service.rs                                                    â”‚
â”‚ - get_match_history() â†’ analyze_match_list_data()                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  åˆ†æå¼•æ“ (5æ­¥æµç¨‹)        â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                           â”‚
        â†“                                           â†“
[Parser å±‚]                                  [Strategy å±‚]
è§£æåŸå§‹ JSON                                 é€‰æ‹©åˆ†æç­–ç•¥
        â†“                                           â†“
[Analyzer å±‚]                               [Traits å±‚]
è®¡ç®—é‡åŒ–æŒ‡æ ‡                                 ç”Ÿæˆç‰¹å¾æ ‡ç­¾
        â†“                                           â†“
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
                    [Merger å±‚]
                    å»é‡ä¼˜åŒ–ç‰¹å¾
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿”å›æ•°æ®: PlayerMatchStats                                              â”‚
â”‚ {                                                                       â”‚
â”‚   total_games, wins, win_rate,                                          â”‚
â”‚   avg_kda, dpm, cspm, vspm,                                            â”‚
â”‚   traits: [12ä¸ªç²¾ç‚¼ç‰¹å¾],                                               â”‚
â”‚   favorite_champions: [...],                                            â”‚
â”‚   recent_performance: [...]                                             â”‚
â”‚ }                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‰ç«¯æ˜¾ç¤º                                                                â”‚
â”‚ - Dashboard.vue                                                         â”‚
â”‚ - GameStats.vue (ç»Ÿè®¡æ•°æ®)                                              â”‚
â”‚ - SummonerTraits.vue (ç‰¹å¾æ ‡ç­¾)                                         â”‚
â”‚ - SummonerCard.vue (å¬å”¤å¸ˆå¡ç‰‡)                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”¬ **è¯¦ç»†åˆ†ææµç¨‹ï¼ˆ5æ­¥éª¤ï¼‰**

### **ç¬¬1æ­¥ï¼šParser å±‚ - æ•°æ®è§£æ** ğŸ”§

**æ–‡ä»¶**: `parser.rs`

**èŒè´£**: å°† LCU API çš„åŸå§‹ JSON è§£æä¸ºç»Ÿä¸€çš„å†…éƒ¨æ•°æ®ç»“æ„

```rust
// è¾“å…¥ï¼šLCU åŸå§‹ JSON æ•°ç»„
let games = match_list_data["games"]["games"].as_array();

// è°ƒç”¨ Parser
let parsed_games = parse_games(games, current_puuid);

// è¾“å‡ºï¼šParsedGame æ•°ç»„
struct ParsedGame {
    game_id: u64,
    queue_id: i64,
    game_duration: i32,
    game_creation: i64,
    player_data: ParsedPlayerData {
        win, kills, deaths, assists, kda,
        damage_to_champions, damage_taken, gold_earned,
        vision_score, cs, champion_id, role, lane, ...
    },
    team_data: ParsedTeamData {
        team_total_kills, team_total_damage,
        team_total_vision_score, ...
    }
}
```

**å…³é”®é€»è¾‘**:
1. æŸ¥æ‰¾å½“å‰ç©å®¶çš„ `participant_id`
2. æå–ç©å®¶çš„è¯¦ç»†æ•°æ®
3. è®¡ç®—é˜Ÿä¼æ€»æ•°æ®ï¼ˆç”¨äºåç»­çš„å æ¯”è®¡ç®—ï¼‰
4. è¯†åˆ«ä½ç½®ä¿¡æ¯

**ä¼˜åŠ¿**:
- âœ… LCU API å˜æ›´æ—¶ï¼Œåªéœ€ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶
- âœ… å…¶ä»–åˆ†æå™¨æ— éœ€å…³å¿ƒ API ç»“æ„

---

### **ç¬¬2æ­¥ï¼šStrategy å±‚ - é€‰æ‹©åˆ†æç­–ç•¥** ğŸ¯

**æ–‡ä»¶**: `strategy.rs`

**èŒè´£**: æ ¹æ®é˜Ÿåˆ—ç±»å‹å†³å®šåˆ†ææ·±åº¦

```rust
// æ ¹æ®é˜Ÿåˆ—IDé€‰æ‹©ç­–ç•¥
let strategy = if let Some(qid) = queue_id {
    AnalysisStrategy::from_queue_id(qid as i64)
} else {
    AnalysisStrategy::from_games(&parsed_games)
};

// ç­–ç•¥å†³å®šäº†åˆ†ææ·±åº¦
match strategy {
    Ranked => {
        // 5å±‚å®Œæ•´åˆ†æ
        enable_advanced_analysis: true,
        enable_role_analysis: true,
        enable_distribution_analysis: true,
        max_traits: 12
    },
    Other => {
        // 2å±‚ç®€åŒ–åˆ†æ
        enable_advanced_analysis: false,
        enable_role_analysis: false,
        enable_distribution_analysis: false,
        max_traits: 6
    }
}
```

**å†³ç­–é€»è¾‘**:
- **420/440** (å•æ’/çµæ´»æ’) â†’ `Ranked` ç­–ç•¥
- **å…¶ä»–æ‰€æœ‰é˜Ÿåˆ—** â†’ `Other` ç­–ç•¥

**è¾“å‡ºæ—¥å¿—**:
```
ğŸ¯ Strategy: æ’ä½æ¨¡å¼ - æ ¸å¿ƒæ·±åº¦åˆ†æ (queueId=420)
ğŸ“Š åˆ†ææ–¹æ¡ˆ: 5å±‚å®Œæ•´åˆ†æï¼ˆåŸºç¡€â†’æ·±åº¦â†’ä½ç½®â†’åˆ†å¸ƒâ†’èƒœè´Ÿï¼‰
```

---

### **ç¬¬3æ­¥ï¼šAnalyzer å±‚ - é‡åŒ–è®¡ç®—** ğŸ“Š

**æ–‡ä»¶**: `analyzer.rs` + `thresholds.rs`

**èŒè´£**: è®¡ç®—æ‰€æœ‰é‡åŒ–æŒ‡æ ‡

```rust
let mut player_stats = analyze_player_stats(&parsed_games, current_puuid, context);

// è¾“å‡º: PlayerMatchStats
{
    // åŸºç¡€ç»Ÿè®¡
    total_games: 20,
    wins: 13,
    losses: 7,
    win_rate: 65.0,

    // KDA ç»Ÿè®¡
    avg_kills: 8.5,
    avg_deaths: 4.2,
    avg_assists: 12.3,
    avg_kda: 4.95,

    // ä»Šæ—¥ç»Ÿè®¡
    today_games: 5,
    today_wins: 4,

    // è¡ç”ŸæŒ‡æ ‡
    dpm: 750.5,    // æ¯åˆ†é’Ÿä¼¤å®³
    cspm: 7.2,     // æ¯åˆ†é’Ÿè¡¥åˆ€
    vspm: 1.8,     // æ¯åˆ†é’Ÿè§†é‡

    // å¸¸ç”¨è‹±é›„
    favorite_champions: [
        { champion_id: 236, games: 8, wins: 6, win_rate: 75.0 }
    ],

    // æœ€è¿‘æˆ˜ç»©
    recent_performance: [
        { game_id, win, champion_id, kills, deaths, assists, kda, ... }
    ],

    // ç‰¹å¾ï¼ˆç¨åå¡«å……ï¼‰
    traits: []
}
```

**è®¡ç®—è¿‡ç¨‹**:
1. æ ¹æ® `context` è¿‡æ»¤å¯¹å±€ï¼ˆé˜Ÿåˆ—IDåŒ¹é…ï¼‰
2. éå†æ‰€æœ‰å¯¹å±€ç´¯åŠ æ•°æ®
3. è®¡ç®—å¹³å‡å€¼å’Œè¡ç”ŸæŒ‡æ ‡
4. ä½¿ç”¨ `thresholds.rs` çš„é˜ˆå€¼æ ‡å‡†

---

### **ç¬¬4æ­¥ï¼šTraits å±‚ - ç‰¹å¾åˆ†æ** ğŸ·ï¸

**æ–‡ä»¶**: 5ä¸ªåˆ†æå™¨ + `thresholds.rs`

#### **4.1 åŸºç¡€ç‰¹å¾ï¼ˆæ‰€æœ‰æ¨¡å¼ï¼‰** - `traits_analyzer.rs`

```rust
traits.extend(analyze_traits(&player_stats));

// åˆ†æç»´åº¦ï¼š
// 1. èƒœç‡ç‰¹å¾
if stats.win_rate >= thresholds::win_rate::EXCELLENT_RANKED {
    // "å¤§ç¥" (â‰¥65%)
}

// 2. KDAç‰¹å¾
if stats.avg_kda >= thresholds::kda::EXCELLENT_RANKED {
    // "å¤§çˆ¹" (â‰¥4.0)
}

// 3. è¿èƒœç‰¹å¾
if win_streak >= thresholds::streak::WIN_STREAK_GOOD {
    // "è¿èƒœç‹" (â‰¥5è¿èƒœ)
}

// è¾“å‡ºç¤ºä¾‹ï¼š
[
    { name: "å¤§ç¥", description: "èƒœç‡65%è¶…é«˜", score: 65, type: "good" },
    { name: "å¤§çˆ¹", description: "KDA 4.5è¶…é«˜", score: 45, type: "good" }
]
```

#### **4.2 æ·±åº¦ç‰¹å¾ï¼ˆä»…æ’ä½ï¼‰** - `advanced_analyzer.rs`

```rust
if strategy.enable_advanced_analysis() {
    traits.extend(analyze_advanced_traits(&player_stats, games, current_puuid));
}

// åˆ†æç»´åº¦ï¼š
// 1. å‚å›¢ç‡ (KP%)
if avg_kp >= thresholds::kill_participation::HIGH {
    // "å›¢æˆ˜æ ¸å¿ƒ" (â‰¥70%)
}

// 2. ä¼¤å®³å æ¯”
if avg_damage_share >= thresholds::damage_share::HIGH {
    // "è¾“å‡ºæ ¸å¿ƒ" (â‰¥30%)
}

// 3. ç¨³å®šæ€§åˆ†æ
let kda_variance = calculate_variance(&kda_list);
if kda_variance <= thresholds::stability::KDA_VARIANCE_STABLE {
    // "ç¨³å®šå‘æŒ¥" (æ–¹å·®â‰¤1.0)
}

// 4. è¶‹åŠ¿åˆ†æ
let (early_wr, recent_wr) = calculate_trend(&games);
if recent_wr > early_wr + 10.0 {
    // "çŠ¶æ€å›å‡" (è¿‘æœŸèƒœç‡æå‡)
}

// è¾“å‡ºç¤ºä¾‹ï¼š
[
    { name: "å›¢æˆ˜æ ¸å¿ƒ", description: "å‚å›¢ç‡73%æé«˜", score: 73, type: "good" },
    { name: "è¾“å‡ºæ ¸å¿ƒ", description: "ä¼¤å®³å æ¯”32%", score: 32, type: "good" }
]
```

#### **4.3 ä½ç½®ç‰¹å¾ï¼ˆä»…æ’ä½ï¼‰** - `role_analyzer.rs`

```rust
if strategy.enable_role_analysis() {
    let role_stats_map = identify_player_roles(games, current_puuid);
    traits.extend(analyze_role_based_traits(&player_stats, &role_stats_map));
}

// åˆ†æç»´åº¦ï¼š
// 1. ä½ç½®ä¸“ç²¾
if role_stats.win_rate >= thresholds::win_rate::EXCELLENT_OTHER {
    // "ADCä¸“ç²¾" (è¯¥ä½ç½®èƒœç‡â‰¥60%)
}

// 2. å…¨èƒ½é€‰æ‰‹
if role_count >= 3 && stats.win_rate >= thresholds::win_rate::GOOD {
    // "å…¨èƒ½é€‰æ‰‹" (èƒ½èƒœä»»3+ä½ç½®)
}

// è¾“å‡ºç¤ºä¾‹ï¼š
[
    { name: "ADCä¸“ç²¾", description: "æ‰“ADCèƒœç‡68%", score: 68, type: "good" }
]
```

#### **4.4 åˆ†å¸ƒç‰¹å¾ï¼ˆä»…æ’ä½ï¼‰** - `distribution_analyzer.rs`

```rust
if strategy.enable_distribution_analysis() {
    traits.extend(analyze_distribution_traits(&player_stats.recent_performance));
}

// åˆ†æç»´åº¦ï¼š
// 1. é«˜å…‰æ—¶åˆ»
if s_count >= 3 {  // KDA â‰¥ thresholds::kda::S_GRADE (6.0)
    // "é«˜å…‰æ—¶åˆ»" (3+åœºè¶…ç¥)
}

// 2. ç¨³å®šä¼˜ç§€
if excellent_rate >= 0.50 {
    // "ç¨³å®šä¼˜ç§€" (50%ä»¥ä¸ŠKDAâ‰¥4.0)
}

// 3. ä¸¤æåˆ†åŒ–
if s_count >= 3 && d_count >= 3 {
    // "ä¸¤æåˆ†åŒ–" (æ—¢æœ‰è¶…ç¥åˆæœ‰å´©ç›˜)
}

// è¾“å‡ºç¤ºä¾‹ï¼š
[
    { name: "é«˜å…‰æ—¶åˆ»", description: "20åœºä¸­5åœºè¶…ç¥", score: 5, type: "good" },
    { name: "ç¨³å®šä¼˜ç§€", description: "60%å¯¹å±€KDA>4.0", score: 60, type: "good" }
]
```

#### **4.5 èƒœè´Ÿæ¨¡å¼ï¼ˆæ‰€æœ‰æ¨¡å¼ï¼‰** - `distribution_analyzer.rs`

```rust
traits.extend(analyze_win_loss_pattern(&player_stats.recent_performance));

// åˆ†æç»´åº¦ï¼š
// 1. è¿‘æœŸç«çƒ­ (æœ€è¿‘5åœº)
if wins_5 >= 4 {
    // "è¿‘æœŸç«çƒ­" (5åœº4èƒœ+)
}

// 2. è¿‘æœŸå¼ºåŠ¿ (æœ€è¿‘10åœº)
if wins_10 >= 8 {
    // "è¿‘æœŸå¼ºåŠ¿" (10åœº8èƒœ+)
}

// è¾“å‡ºç¤ºä¾‹ï¼š
[
    { name: "è¿‘æœŸç«çƒ­", description: "æœ€è¿‘5åœº4èƒœ", score: 4, type: "good" }
]
```

---

### **ç¬¬5æ­¥ï¼šMerger å±‚ - å»é‡ä¼˜åŒ–** âœ¨

**æ–‡ä»¶**: `trait_merger.rs`

**èŒè´£**: åˆå¹¶ç›¸ä¼¼ç‰¹å¾ï¼Œé™åˆ¶æ•°é‡

```rust
let mut optimized_traits = optimize_traits(traits);
optimized_traits.truncate(strategy.max_traits());

// å»é‡é€»è¾‘ï¼š
// 1. ç›¸ä¼¼ç‰¹å¾åˆå¹¶ï¼ˆå¦‚"è¾“å‡ºæ ¸å¿ƒ"+"ä¸»è¦è¾“å‡º"â†’ä¿ç•™"è¾“å‡ºæ ¸å¿ƒ"ï¼‰
// 2. æŒ‰å¾—åˆ†æ’åºï¼ˆä»é«˜åˆ°ä½ï¼‰
// 3. é™åˆ¶æ•°é‡ï¼š
//    - æ’ä½æ¨¡å¼ï¼š12ä¸ª
//    - å…¶ä»–æ¨¡å¼ï¼š6ä¸ª

// è¾“å…¥ï¼šå¯èƒ½æœ‰ 20+ ä¸ªç‰¹å¾
[
    { name: "å¤§ç¥", score: 65 },
    { name: "å¤§çˆ¹", score: 45 },
    { name: "å›¢æˆ˜æ ¸å¿ƒ", score: 73 },
    { name: "ç§¯æå‚å›¢", score: 60 },  // â† ä¸"å›¢æˆ˜æ ¸å¿ƒ"ç›¸ä¼¼ï¼Œå¯èƒ½è¢«åˆå¹¶
    { name: "è¾“å‡ºæ ¸å¿ƒ", score: 32 },
    ...
]

// è¾“å‡ºï¼šç²¾ç‚¼å 12ä¸ªï¼ˆæ’ä½ï¼‰æˆ– 6ä¸ªï¼ˆå…¶ä»–ï¼‰
[
    { name: "å›¢æˆ˜æ ¸å¿ƒ", score: 73 },
    { name: "å¤§ç¥", score: 65 },
    { name: "å¤§çˆ¹", score: 45 },
    { name: "è¾“å‡ºæ ¸å¿ƒ", score: 32 },
    ...
]
```

---

## ğŸ¨ **é˜ˆå€¼é…ç½®çš„ä½¿ç”¨**

**æ–‡ä»¶**: `thresholds.rs`

æ‰€æœ‰åˆ†æå™¨ç»Ÿä¸€ä½¿ç”¨ `thresholds.rs` çš„é˜ˆå€¼é…ç½®ï¼š

```rust
// ç¤ºä¾‹ï¼šèƒœç‡åˆ¤æ–­
use super::thresholds;

if stats.win_rate >= thresholds::win_rate::EXCELLENT_RANKED {
    // æ’ä½å¤§ç¥æ ‡å‡†ï¼ˆ65%ï¼‰
} else if stats.win_rate >= thresholds::win_rate::EXCELLENT_OTHER {
    // å…¶ä»–æ¨¡å¼å¤§ç¥æ ‡å‡†ï¼ˆ60%ï¼‰
}

// å¯ç”¨çš„é˜ˆå€¼æ¨¡å—ï¼š
// - thresholds::win_rate::*
// - thresholds::kda::*
// - thresholds::kill_participation::*
// - thresholds::damage_share::*
// - thresholds::vision::*
// - thresholds::streak::*
// - thresholds::stability::*
// - thresholds::distribution::*
```

**ä¼˜åŠ¿**:
- âœ… ç»Ÿä¸€ç®¡ç†ï¼Œä¸€å¤„ä¿®æ”¹å…¨å±€ç”Ÿæ•ˆ
- âœ… æ˜“äºå®éªŒä¸åŒé˜ˆå€¼
- âœ… æ”¯æŒä½ç½®ç‰¹å®šé˜ˆå€¼

---

## ğŸ“ˆ **å®é™…æ•°æ®æµç¤ºä¾‹**

### **åœºæ™¯ï¼šæŸ¥çœ‹æ’ä½èµ›æˆ˜ç»©**

```
1. ç”¨æˆ·æ“ä½œ
   - å‰ç«¯é€‰æ‹©"å•åŒæ’ä½"é˜Ÿåˆ—ï¼ˆqueueId=420ï¼‰
   - ç‚¹å‡»åˆ·æ–°æˆ˜ç»©

2. å‰ç«¯è°ƒç”¨
   fetchMatchHistory(420)
   â†“
   invoke('get_match_history', { count: 20, queue_id: 420 })

3. åç«¯å¤„ç†
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ matches/commands.rs                          â”‚
   â”‚ get_match_history(count, queue_id)          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ matches/service.rs                           â”‚
   â”‚ get_match_history(client, 20, Some(420))    â”‚
   â”‚ â†’ analyze_match_list_data()                 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ç¬¬1æ­¥: Parser                        â”‚
   â”‚ parse_games(games, puuid)           â”‚
   â”‚ â†’ è§£æ20åœºå¯¹å±€æ•°æ®                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ç¬¬2æ­¥: Strategy                      â”‚
   â”‚ AnalysisStrategy::from_queue_id(420) â”‚
   â”‚ â†’ Ranked ç­–ç•¥                        â”‚
   â”‚ â†’ å¯ç”¨5å±‚å®Œæ•´åˆ†æ                    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ç¬¬3æ­¥: Analyzer                      â”‚
   â”‚ analyze_player_stats()              â”‚
   â”‚ â†’ è®¡ç®—: èƒœç‡65%, KDA 4.5, ...       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ç¬¬4æ­¥: Traits (5å±‚)                  â”‚
   â”‚ Layer 1: analyze_traits()           â”‚
   â”‚   â†’ "å¤§ç¥"(65%), "å¤§çˆ¹"(4.5 KDA)    â”‚
   â”‚ Layer 2: analyze_advanced_traits()  â”‚
   â”‚   â†’ "å›¢æˆ˜æ ¸å¿ƒ"(73% KP)              â”‚
   â”‚ Layer 3: analyze_role_based_traits() â”‚
   â”‚   â†’ "ADCä¸“ç²¾"(68%)                  â”‚
   â”‚ Layer 4: analyze_distribution()     â”‚
   â”‚   â†’ "é«˜å…‰æ—¶åˆ»"(5åœºè¶…ç¥)              â”‚
   â”‚ Layer 5: analyze_win_loss_pattern() â”‚
   â”‚   â†’ "è¿‘æœŸç«çƒ­"(5åœº4èƒœ)               â”‚
   â”‚ â†’ å…±ç”Ÿæˆ 18ä¸ªç‰¹å¾                    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ç¬¬5æ­¥: Merger                        â”‚
   â”‚ optimize_traits()                   â”‚
   â”‚ â†’ å»é‡ã€æ’åºã€é™åˆ¶12ä¸ª               â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ è¿”å›: PlayerMatchStats               â”‚
   â”‚ {                                    â”‚
   â”‚   total_games: 20,                   â”‚
   â”‚   wins: 13, win_rate: 65.0,          â”‚
   â”‚   avg_kda: 4.5,                      â”‚
   â”‚   dpm: 750, cspm: 7.2, vspm: 1.8,   â”‚
   â”‚   traits: [12ä¸ªç²¾ç‚¼ç‰¹å¾],             â”‚
   â”‚   favorite_champions: [...],         â”‚
   â”‚   recent_performance: [...]          â”‚
   â”‚ }                                    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
4. å‰ç«¯æ˜¾ç¤º
   Dashboard.vue
   â”œâ”€â”€ GameStats.vue
   â”‚   â”œâ”€â”€ ç»Ÿè®¡æ•°æ®ï¼š20åœº 13èƒœ 65%
   â”‚   â”œâ”€â”€ KDA: 8.5 / 4.2 / 12.3
   â”‚   â””â”€â”€ è¡ç”ŸæŒ‡æ ‡: DPM 750, CSPM 7.2
   â”œâ”€â”€ SummonerTraits.vue
   â”‚   â””â”€â”€ å±•ç¤º12ä¸ªç‰¹å¾æ ‡ç­¾
   â””â”€â”€ æœ€è¿‘æˆ˜ç»©åˆ—è¡¨
```

---

## ğŸ”„ **å¯¹æ¯”ï¼šæ’ä½ vs å…¶ä»–æ¨¡å¼**

### **æ’ä½æ¨¡å¼ï¼ˆ420/440ï¼‰**

```
ğŸ“Š åˆ†ææ–¹æ¡ˆ: 5å±‚å®Œæ•´åˆ†æ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 1: åŸºç¡€ç‰¹å¾ âœ…                 â”‚
â”‚ - èƒœç‡ã€KDAã€è¿èƒœ                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Layer 2: æ·±åº¦ç‰¹å¾ âœ…                 â”‚
â”‚ - å‚å›¢ç‡ã€ä¼¤å®³å æ¯”ã€ç¨³å®šæ€§ã€è¶‹åŠ¿     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Layer 3: ä½ç½®ç‰¹å¾ âœ…                 â”‚
â”‚ - ä½ç½®è¯†åˆ«ã€ä¸“ç²¾åˆ†æ                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Layer 4: åˆ†å¸ƒç‰¹å¾ âœ…                 â”‚
â”‚ - é«˜å…‰æ—¶åˆ»ã€å´©ç›˜åˆ†æ                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Layer 5: èƒœè´Ÿæ¨¡å¼ âœ…                 â”‚
â”‚ - è¿‘æœŸçŠ¶æ€                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
âœ¨ è¾“å‡º: 12ä¸ªç²¾ç‚¼ç‰¹å¾
âš¡ è®¡ç®—å¼€é”€: é«˜
ğŸ¯ ç›®æ ‡: æ·±åº¦æ´å¯Ÿ
```

### **å…¶ä»–æ¨¡å¼ï¼ˆARAMã€åŒ¹é…ç­‰ï¼‰**

```
ğŸ“Š åˆ†ææ–¹æ¡ˆ: 2å±‚ç®€åŒ–åˆ†æ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 1: åŸºç¡€ç‰¹å¾ âœ…                 â”‚
â”‚ - èƒœç‡ã€KDAã€è¿èƒœ                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Layer 2: æ·±åº¦ç‰¹å¾ âŒ è·³è¿‡             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Layer 3: ä½ç½®ç‰¹å¾ âŒ è·³è¿‡             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Layer 4: åˆ†å¸ƒç‰¹å¾ âŒ è·³è¿‡             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Layer 5: èƒœè´Ÿæ¨¡å¼ âœ…                 â”‚
â”‚ - è¿‘æœŸçŠ¶æ€                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
âœ¨ è¾“å‡º: 6ä¸ªç²¾ç‚¼ç‰¹å¾
âš¡ è®¡ç®—å¼€é”€: ä½
ğŸ¯ ç›®æ ‡: å¿«é€Ÿå±•ç¤º
```

---

## ğŸ¯ **å…³é”®å†³ç­–ç‚¹**

### **1. ä½•æ—¶ä½¿ç”¨ Parserï¼Ÿ**
- âœ… æ¯æ¬¡æ¥æ”¶ LCU API æ•°æ®æ—¶
- âœ… åœ¨ä»»ä½•åˆ†æä¹‹å‰

### **2. ä½•æ—¶é€‰æ‹© Strategyï¼Ÿ**
- âœ… æ ¹æ® `queue_id` è‡ªåŠ¨é€‰æ‹©
- âœ… 420/440 â†’ Ranked
- âœ… å…¶ä»– â†’ Other

### **3. å“ªäº›åˆ†æå™¨ä¼šæ‰§è¡Œï¼Ÿ**
```rust
// æ‰€æœ‰æ¨¡å¼
âœ… analyze_traits()           // åŸºç¡€ç‰¹å¾
âœ… analyze_win_loss_pattern() // èƒœè´Ÿæ¨¡å¼

// ä»…æ’ä½æ¨¡å¼
ğŸ”’ analyze_advanced_traits()     // æ·±åº¦ç‰¹å¾
ğŸ”’ analyze_role_based_traits()   // ä½ç½®ç‰¹å¾
ğŸ”’ analyze_distribution_traits() // åˆ†å¸ƒç‰¹å¾
```

### **4. å¦‚ä½•ä½¿ç”¨é˜ˆå€¼ï¼Ÿ**
```rust
// ç»Ÿä¸€ä½¿ç”¨ thresholds æ¨¡å—
use super::thresholds;

if value >= thresholds::module::THRESHOLD {
    // åˆ¤æ–­é€»è¾‘
}
```

---

## ğŸ“ **æ€»ç»“**

### **æ ¸å¿ƒä¼˜åŠ¿**
1. **Parser éš”ç¦»** - LCU API å˜æ›´å½±å“æœ€å°åŒ–
2. **Strategy å†³ç­–** - è‡ªåŠ¨é€‰æ‹©åˆ†ææ·±åº¦
3. **Thresholds ç»Ÿä¸€** - é˜ˆå€¼é›†ä¸­ç®¡ç†
4. **5å±‚åˆ†æ** - ä»åŸºç¡€åˆ°æ·±åº¦é€å±‚é€’è¿›
5. **æ™ºèƒ½å»é‡** - è¾“å‡ºç²¾ç‚¼ç‰¹å¾

### **æ•°æ®æµ**
```
LCU JSON â†’ Parser â†’ Strategy â†’ Analyzer â†’ [TraitsÃ—5] â†’ Merger â†’ å‰ç«¯æ˜¾ç¤º
```

### **çµæ´»æ€§**
- âœ… ä¿®æ”¹é˜ˆå€¼ â†’ åªæ”¹ `thresholds.rs`
- âœ… æ–°å¢åˆ†æ â†’ æ–°å»ºåˆ†æå™¨
- âœ… è°ƒæ•´ç­–ç•¥ â†’ åªæ”¹ `strategy.rs`
- âœ… APIå˜æ›´ â†’ åªæ”¹ `parser.rs`

---

*å®Œæ•´æµç¨‹è§£æ - 2025-10-17*

