# 🛠️ 故障排查指南

本文档汇总了 Nidalee 使用过程中的常见问题及解决方案。

## 📋 目录

- [安装问题](#安装问题)
- [更新问题](#更新问题)
- [连接问题](#连接问题)
- [功能问题](#功能问题)
- [性能问题](#性能问题)
- [其他问题](#其他问题)

---

## 安装问题

### Windows 安装问题

#### 问题：Windows SmartScreen 阻止安装

**现象**：双击安装包时提示"Windows 已保护你的电脑"

**解决方案**：

1. 点击"更多信息"
2. 点击"仍要运行"
3. 或者：右键安装包 → 属性 → 勾选"解除锁定" → 应用

#### 问题：需要管理员权限

**现象**：安装时提示需要管理员权限

**解决方案**：

1. 右键安装包
2. 选择"以管理员身份运行"
3. 按照安装向导完成安装

#### 问题：安装路径写入失败

**现象**：安装过程中提示无法写入文件

**解决方案**：

1. 确保安装路径有写入权限
2. 尝试更换安装路径（如 C:\Program Files 换到 D:\Programs）
3. 以管理员身份运行安装程序
4. 临时关闭杀毒软件重试

### macOS 安装问题

#### 问题：macOS Gatekeeper 阻止运行

**现象**：首次启动时提示"无法打开，因为无法验证开发者"

**解决方案 1**（推荐）：

1. 打开"系统设置" → "隐私与安全性"
2. 在底部找到被阻止的应用提示
3. 点击"仍要打开"

**解决方案 2**：

1. 在访达中找到应用
2. 按住 Control 键点击应用图标
3. 选择"打开"
4. 在弹出对话框中点击"打开"

#### 问题：应用已损坏

**现象**：提示"应用已损坏，无法打开"

**解决方案**：

```bash
# 在终端中执行（替换为实际应用路径）
xattr -cr /Applications/Nidalee.app
```

---

## 更新问题

### 更新失败或卡住

**现象**：

- 更新进度条长时间不动
- 更新失败，提示网络错误
- 下载速度过慢

**解决方案**：

1. **使用手动下载**：
   - 点击侧边栏的"前往手动下载"按钮
   - 或访问 [GitHub Releases](https://github.com/codeXcn/Nidalee/releases/latest)
   - 下载对应平台的安装包
   - 手动安装更新

2. **检查网络**：
   - 确保网络连接正常
   - 尝试使用其他网络（如切换到移动热点）
   - 某些地区访问 GitHub 可能较慢

3. **清除缓存重试**：
   - 完全退出应用
   - 删除临时下载文件
   - 重新启动应用

### 更新后无法启动

**现象**：更新完成后应用无法正常启动

**解决方案**：

1. 卸载当前版本
2. 从官方 Releases 下载最新安装包
3. 全新安装
4. 如果问题依然存在，请在 GitHub 提交 Issue

---

## 连接问题

### 无法连接到 League Client

**现象**：

- 应用提示"无法连接到游戏客户端"
- 功能无法正常使用

**排查步骤**：

#### 1. 确认 LOL 客户端状态

- 确保英雄联盟客户端已启动并完成登录
- 检查游戏客户端是否正常运行

#### 2. 重启应用和客户端

```text
1. 完全退出 Nidalee
2. 完全退出英雄联盟客户端
3. 先启动英雄联盟客户端并登录
4. 再启动 Nidalee
```

#### 3. 以管理员身份运行（Windows）

- 右键 Nidalee 图标
- 选择"以管理员身份运行"

#### 4. 检查端口占用

LOL 客户端默认使用端口范围：2999 或其他随机端口

```bash
# Windows 检查端口
netstat -ano | findstr "2999"

# macOS/Linux 检查端口
lsof -i :2999
```

#### 5. 检查防火墙设置

- 确保防火墙没有阻止 Nidalee
- 添加 Nidalee 到防火墙例外列表

#### 6. 查看日志文件

检查应用日志获取详细错误信息（日志位置通常在应用数据目录）

### 连接频繁断开

**现象**：连接建立后频繁断开重连

**可能原因**：

1. LOL 客户端不稳定
2. 系统资源不足
3. 网络波动

**解决方案**：

1. 确保 LOL 客户端运行稳定
2. 关闭不必要的后台程序释放资源
3. 检查网络连接是否稳定
4. 尝试重启路由器

---

## 功能问题

### 自动接受不工作

**排查步骤**：

1. 确认已在设置中开启"自动接受"功能
2. 检查接受延迟设置（建议 1-2 秒）
3. 确认应用已成功连接到 LOL 客户端
4. 尝试手动接受一次，观察是否有权限问题

### 自动选择英雄失败

**排查步骤**：

1. 确认已配置英雄预设
2. 检查预设的英雄是否已解锁
3. 确认是否在正确的游戏模式（排位/匹配等）
4. 检查是否有网络延迟导致选择超时

### 数据显示不准确

**可能原因**：

1. 数据源 API 延迟
2. 缓存未及时更新
3. API 限流

**解决方案**：

1. 手动刷新数据
2. 检查网络连接
3. 等待片刻后重试
4. 清除应用缓存

---

## 性能问题

### 应用占用内存过高

**正常范围**：50-200 MB

**如果超出正常范围**：

1. 完全退出应用并重启
2. 检查是否有内存泄漏（长时间运行）
3. 更新到最新版本
4. 如果问题持续，请提交 Issue 并附上系统信息

### 应用启动慢

**可能原因**：

1. 首次启动需要初始化
2. 系统资源不足
3. 杀毒软件扫描

**解决方案**：

1. 首次启动慢属正常现象
2. 关闭不必要的后台程序
3. 将应用添加到杀毒软件白名单
4. 确保安装在 SSD 而非机械硬盘

### 界面卡顿

**解决方案**：

1. 更新显卡驱动
2. 检查系统资源占用
3. 降低 LOL 客户端画质设置
4. 关闭不必要的特效和动画

---

## 其他问题

### 数据隐私与安全

**Q: Nidalee 会收集我的个人信息吗？**

A: 不会。Nidalee 仅通过 LOL 官方客户端 API (LCU) 读取本地数据，不会上传任何个人信息。

**Q: Nidalee 安全吗？会被封号吗？**

A: Nidalee 只使用官方提供的 LCU API，不涉及任何内存修改、进程注入等违规操作。正常使用不会导致封号。

### 卸载应用

#### Windows

1. 打开"设置" → "应用" → "应用和功能"
2. 找到 Nidalee
3. 点击"卸载"

或者：

1. 打开"控制面板" → "程序和功能"
2. 找到 Nidalee
3. 右键 → "卸载"

#### macOS

1. 打开访达 → "应用程序"
2. 找到 Nidalee
3. 拖拽到废纸篓
4. 清空废纸篓

### 重置应用配置

如果应用出现异常，可以尝试重置配置：

**配置文件位置**：

- Windows: `%APPDATA%/Nidalee/`
- macOS: `~/Library/Application Support/Nidalee/`

**重置步骤**：

1. 完全退出应用
2. 删除或重命名上述配置目录
3. 重新启动应用

### 获取帮助

如果以上方案都无法解决你的问题：

1. **查看文档**：
   - [用户指南](./user-guide-zh.md)
   - [FAQ](../README_ZH.md#常见问题)

2. **搜索已知问题**：
   - 访问 [GitHub Issues](https://github.com/codeXcn/Nidalee/issues)
   - 搜索是否有类似问题

3. **提交新 Issue**：
   - 访问 [New Issue](https://github.com/codeXcn/Nidalee/issues/new)
   - 提供详细的问题描述、错误信息、系统信息
   - 附上截图或日志文件

4. **参与讨论**：
   - 访问 [Discussions](https://github.com/codeXcn/Nidalee/discussions)
   - 与社区成员交流

---

## 📊 系统信息收集

提交问题时，请提供以下信息以便快速定位问题：

### 基本信息

- 操作系统及版本（如 Windows 11 23H2）
- Nidalee 版本号
- LOL 客户端版本

### 错误信息

- 错误提示截图
- 日志文件（如果有）
- 问题复现步骤

### 系统环境

- CPU / 内存配置
- 是否使用管理员权限运行
- 杀毒软件/防火墙设置
- 网络环境（校园网/家庭网络等）

---

**最后更新**：2025-10-10

_本文档持续更新中，如有遗漏或补充，欢迎提交 PR。_
